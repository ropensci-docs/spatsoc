<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="spatsoc">
<title>Introduction to spatsoc • spatsoc</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to spatsoc">
<meta property="og:description" content="spatsoc">
<meta property="og:image" content="https://docs.ropensci.org/spatsoc/logo.png">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">spatsoc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/intro-spatsoc.html">Introduction to spatsoc</a>
    <a class="dropdown-item" href="../articles/faq.html">Frequently asked questions</a>
    <a class="dropdown-item" href="../articles/using-in-sna.html">Using spatsoc in social network analysis</a>
    <a class="dropdown-item" href="../articles/using-edge-and-dyad.html">Using edge list and dyad id functions</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/additional-data-formats.html">Additional data formats</a>
    <a class="dropdown-item" href="../articles/faq.html">Frequently asked questions about spatsoc</a>
    <a class="dropdown-item" href="../articles/intro-spatsoc.html">Introduction to spatsoc</a>
    <a class="dropdown-item" href="../articles/using-edge-and-dyad.html">Using edge list generating functions and dyad_id</a>
    <a class="dropdown-item" href="../articles/using-in-sna.html">Using spatsoc in social network analysis - grouping functions</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/spatsoc/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to spatsoc</h1>
                        <h4 data-toc-skip class="author">Alec Robitaille, Quinn Webber and Eric Vander Wal</h4>
            
            <h4 data-toc-skip class="date">2024-03-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/spatsoc/blob/HEAD/vignettes/intro-spatsoc.Rmd" class="external-link"><code>vignettes/intro-spatsoc.Rmd</code></a></small>
      <div class="d-none name"><code>intro-spatsoc.Rmd</code></div>
    </div>

    
    
<p>The <code>spatsoc</code> package provides functionality for analyzing animal relocation data in time and space to identify potential interactions among individuals and build gambit-of-the-group data for constructing social networks.</p>
<p>The package contains grouping and edge list generating functions that are used for identifying spatially and temporally explicit groups from input data. In addition, we provide social network analysis functions for randomizing individual identifiers within groups, designed to test whether social networks generated from animal relocation data were based on non-random social proximity among individuals and for generating group by individual matrices.</p>
<p>The functions were developed for application across animal relocation data, for example, proximity based social network analyses and spatial and temporal clustering of points.</p>
<div class="section level2">
<h2 id="data-preparation">Data preparation<a class="anchor" aria-label="anchor" href="#data-preparation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/spatsoc/">spatsoc</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Note: spatsoc has been updated to follow the R-spatial evolution. </span></span>
<span><span class="co">## Package dependencies and some functions have been modified. </span></span>
<span><span class="co">## Please see the NEWS for details: </span></span>
<span><span class="co">## https://docs.ropensci.org/spatsoc/index.html#news</span></span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Read in spatsoc's example data</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"DT.csv"</span>, package <span class="op">=</span> <span class="st">"spatsoc"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use subset of individuals</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">ID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'H'</span>, <span class="st">'I'</span>, <span class="st">'J'</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Cast character column 'datetime' as POSIXct</span></span>
<span><span class="va">DT</span><span class="op">[</span>, <span class="va">datetime</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="va">datetime</span>, tz <span class="op">=</span> <span class="st">'UTC'</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">ID</span> <span class="op"><a href="https://rdatatable.gitlab.io/data.table/reference/chmatch.html" class="external-link">%chin%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'H'</span>, <span class="st">'I'</span>, <span class="st">'J'</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">ID</th>
<th align="right">X</th>
<th align="right">Y</th>
<th align="left">datetime</th>
<th align="right">population</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">H</td>
<td align="right">701724.1</td>
<td align="right">5504325</td>
<td align="left">2016-11-01 00:00:49</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">H</td>
<td align="right">701648.5</td>
<td align="right">5504276</td>
<td align="left">2016-11-01 02:00:33</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">I</td>
<td align="right">711042.0</td>
<td align="right">5506384</td>
<td align="left">2016-11-01 00:00:24</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">I</td>
<td align="right">711229.0</td>
<td align="right">5506446</td>
<td align="left">2016-11-01 02:00:33</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">J</td>
<td align="right">707568.6</td>
<td align="right">5500406</td>
<td align="left">2016-11-01 00:00:56</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">J</td>
<td align="right">707566.5</td>
<td align="right">5500404</td>
<td align="left">2016-11-01 02:00:21</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p><code>spatsoc</code> expects a <code>data.table</code> for all of its functions. If you have a <code>data.frame</code>, you can use <code><a href="https://rdatatable.gitlab.io/data.table/reference/setDT.html" class="external-link">data.table::setDT()</a></code> to convert it by reference. If your data is a CSV, you can use <code><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">data.table::fread()</a></code> to import it as a <code>data.table</code>.</p>
<p>The data consist of relocations of 3 individuals over 365 days. Using these data, we can compare the various grouping methods available in <code>spatsoc</code>. Note: these examples will use a subset of the data, only individuals H, I and J.</p>
</div>
<div class="section level2">
<h2 id="temporal-grouping">Temporal grouping<a class="anchor" aria-label="anchor" href="#temporal-grouping"></a>
</h2>
<p>The <code>group_times</code> function is used to group relocations temporally. It is flexible to a threshold provided in units of minutes, hours or days. Since GPS fixes taken at regular intervals have some level of variability, we will provide a time threshold (<code>threshold</code>), to consider all fixes within this threshold taken at the same time. Alternatively, we may want to understand different scales of grouping, perhaps daily movement trajectories or seasonal home range overlap.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/group_times.html">group_times</a></span><span class="op">(</span><span class="va">DT</span>, datetime <span class="op">=</span> <span class="st">'datetime'</span>, threshold <span class="op">=</span> <span class="st">'5 minutes'</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">ID</th>
<th align="right">X</th>
<th align="right">Y</th>
<th align="left">datetime</th>
<th align="right">minutes</th>
<th align="right">timegroup</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">I</td>
<td align="right">711042.0</td>
<td align="right">5506384</td>
<td align="left">2016-11-01 00:00:24</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">H</td>
<td align="right">701724.1</td>
<td align="right">5504325</td>
<td align="left">2016-11-01 00:00:49</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">J</td>
<td align="right">707568.6</td>
<td align="right">5500406</td>
<td align="left">2016-11-01 00:00:56</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">J</td>
<td align="right">707566.5</td>
<td align="right">5500404</td>
<td align="left">2016-11-01 02:00:21</td>
<td align="right">0</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">H</td>
<td align="right">701648.5</td>
<td align="right">5504276</td>
<td align="left">2016-11-01 02:00:33</td>
<td align="right">0</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">I</td>
<td align="right">711229.0</td>
<td align="right">5506446</td>
<td align="left">2016-11-01 02:00:33</td>
<td align="right">0</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">J</td>
<td align="right">707562.6</td>
<td align="right">5500374</td>
<td align="left">2016-11-01 04:00:41</td>
<td align="right">0</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">I</td>
<td align="right">711124.0</td>
<td align="right">5506407</td>
<td align="left">2016-11-01 04:00:44</td>
<td align="right">0</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">H</td>
<td align="right">701607.2</td>
<td align="right">5504291</td>
<td align="left">2016-11-01 04:00:54</td>
<td align="right">0</td>
<td align="right">3</td>
</tr>
</tbody>
</table>
<p>A message is returned when <code>group_times</code> is run again on the same <code>DT</code>, as the columns already exist in the input <code>DT</code> and will be overwritten.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/group_times.html">group_times</a></span><span class="op">(</span><span class="va">DT</span>, datetime <span class="op">=</span> <span class="st">'datetime'</span>, threshold <span class="op">=</span> <span class="st">'2 hours'</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## minutes, timegroup columns found in input DT and will be overwritten by this function</span></span></code></pre>
<table class="table">
<thead><tr class="header">
<th align="left">ID</th>
<th align="right">X</th>
<th align="right">Y</th>
<th align="left">datetime</th>
<th align="right">hours</th>
<th align="right">timegroup</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">I</td>
<td align="right">711042.0</td>
<td align="right">5506384</td>
<td align="left">2016-11-01 00:00:24</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">H</td>
<td align="right">701724.1</td>
<td align="right">5504325</td>
<td align="left">2016-11-01 00:00:49</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">J</td>
<td align="right">707568.6</td>
<td align="right">5500406</td>
<td align="left">2016-11-01 00:00:56</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">J</td>
<td align="right">707566.5</td>
<td align="right">5500404</td>
<td align="left">2016-11-01 02:00:21</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">H</td>
<td align="right">701648.5</td>
<td align="right">5504276</td>
<td align="left">2016-11-01 02:00:33</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">I</td>
<td align="right">711229.0</td>
<td align="right">5506446</td>
<td align="left">2016-11-01 02:00:33</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">J</td>
<td align="right">707562.6</td>
<td align="right">5500374</td>
<td align="left">2016-11-01 04:00:41</td>
<td align="right">4</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">I</td>
<td align="right">711124.0</td>
<td align="right">5506407</td>
<td align="left">2016-11-01 04:00:44</td>
<td align="right">4</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">H</td>
<td align="right">701607.2</td>
<td align="right">5504291</td>
<td align="left">2016-11-01 04:00:54</td>
<td align="right">4</td>
<td align="right">3</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/group_times.html">group_times</a></span><span class="op">(</span><span class="va">DT</span>, datetime <span class="op">=</span> <span class="st">'datetime'</span>, threshold <span class="op">=</span> <span class="st">'5 days'</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## hours, timegroup columns found in input DT and will be overwritten by this function</span></span></code></pre>
<table class="table">
<thead><tr class="header">
<th align="left">ID</th>
<th align="right">X</th>
<th align="right">Y</th>
<th align="left">datetime</th>
<th align="right">block</th>
<th align="right">timegroup</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">I</td>
<td align="right">715194.8</td>
<td align="right">5505812</td>
<td align="left">2016-11-02 12:00:53</td>
<td align="right">62</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">J</td>
<td align="right">707571.3</td>
<td align="right">5500478</td>
<td align="left">2016-11-04 22:00:21</td>
<td align="right">62</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">H</td>
<td align="right">702830.7</td>
<td align="right">5504657</td>
<td align="left">2016-11-05 04:00:42</td>
<td align="right">62</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">J</td>
<td align="right">705600.0</td>
<td align="right">5499060</td>
<td align="left">2016-11-09 04:00:48</td>
<td align="right">63</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">I</td>
<td align="right">701633.2</td>
<td align="right">5504967</td>
<td align="left">2016-11-09 22:00:24</td>
<td align="right">63</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">J</td>
<td align="right">707538.3</td>
<td align="right">5500404</td>
<td align="left">2016-11-10 20:00:25</td>
<td align="right">63</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">I</td>
<td align="right">699948.9</td>
<td align="right">5506678</td>
<td align="left">2016-11-11 06:00:42</td>
<td align="right">64</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">H</td>
<td align="right">701748.8</td>
<td align="right">5504397</td>
<td align="left">2016-11-14 16:00:43</td>
<td align="right">64</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">J</td>
<td align="right">708032.1</td>
<td align="right">5500041</td>
<td align="left">2016-11-15 22:00:42</td>
<td align="right">64</td>
<td align="right">3</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="spatial-grouping">Spatial grouping<a class="anchor" aria-label="anchor" href="#spatial-grouping"></a>
</h2>
<p>The <code>group_pts</code> function compares the relocations of all individuals in each timegroup and groups individuals based on a distance threshold provided by the user. The <code>group_pts</code> function uses the “chain rule” where three or more individuals that are all within the defined threshold distance of at least one other individual are considered in the same group. For point based spatial grouping with a distance threshold that does not use the chain rule, see <code>edge_dist</code> below.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/group_times.html">group_times</a></span><span class="op">(</span>DT <span class="op">=</span> <span class="va">DT</span>, datetime <span class="op">=</span> <span class="st">'datetime'</span>, threshold <span class="op">=</span> <span class="st">'15 minutes'</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/group_pts.html">group_pts</a></span><span class="op">(</span><span class="va">DT</span>, threshold <span class="op">=</span> <span class="fl">50</span>, id <span class="op">=</span> <span class="st">'ID'</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'X'</span>, <span class="st">'Y'</span><span class="op">)</span>, timegroup <span class="op">=</span> <span class="st">'timegroup'</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## block, timegroup columns found in input DT and will be overwritten by this function</span></span></code></pre>
<table class="table">
<thead><tr class="header">
<th align="left">ID</th>
<th align="right">X</th>
<th align="right">Y</th>
<th align="right">timegroup</th>
<th align="right">group</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">H</td>
<td align="right">699126.1</td>
<td align="right">5508836</td>
<td align="right">771</td>
<td align="right">771</td>
</tr>
<tr class="even">
<td align="left">I</td>
<td align="right">699130.0</td>
<td align="right">5508761</td>
<td align="right">771</td>
<td align="right">771</td>
</tr>
<tr class="odd">
<td align="left">J</td>
<td align="right">699138.0</td>
<td align="right">5508797</td>
<td align="right">771</td>
<td align="right">771</td>
</tr>
<tr class="even">
<td align="left">H</td>
<td align="right">699930.5</td>
<td align="right">5508032</td>
<td align="right">772</td>
<td align="right">772</td>
</tr>
<tr class="odd">
<td align="left">H</td>
<td align="right">700139.2</td>
<td align="right">5507325</td>
<td align="right">773</td>
<td align="right">773</td>
</tr>
<tr class="even">
<td align="left">I</td>
<td align="right">700131.7</td>
<td align="right">5507321</td>
<td align="right">773</td>
<td align="right">773</td>
</tr>
<tr class="odd">
<td align="left">H</td>
<td align="right">700012.2</td>
<td align="right">5508010</td>
<td align="right">774</td>
<td align="right">774</td>
</tr>
<tr class="even">
<td align="left">I</td>
<td align="right">700015.0</td>
<td align="right">5508001</td>
<td align="right">774</td>
<td align="right">774</td>
</tr>
<tr class="odd">
<td align="left">J</td>
<td align="right">700002.3</td>
<td align="right">5508005</td>
<td align="right">774</td>
<td align="right">774</td>
</tr>
</tbody>
</table>
<p>The <code>group_lines</code> function groups individuals whose trajectories intersect in a specified time interval. This represents a coarser grouping method than <code>group_pts</code> which can help understand shared space at daily, weekly or other temporal resolutions.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">utm</span> <span class="op">&lt;-</span> <span class="fl">32736</span></span>
<span></span>
<span><span class="fu"><a href="../reference/group_times.html">group_times</a></span><span class="op">(</span>DT <span class="op">=</span> <span class="va">DT</span>, datetime <span class="op">=</span> <span class="st">'datetime'</span>, threshold <span class="op">=</span> <span class="st">'1 day'</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/group_lines.html">group_lines</a></span><span class="op">(</span><span class="va">DT</span>, threshold <span class="op">=</span> <span class="fl">50</span>, projection <span class="op">=</span> <span class="va">utm</span>, </span>
<span>            id <span class="op">=</span> <span class="st">'ID'</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'X'</span>, <span class="st">'Y'</span><span class="op">)</span>,</span>
<span>            timegroup <span class="op">=</span> <span class="st">'timegroup'</span>, sortBy <span class="op">=</span> <span class="st">'datetime'</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## minutes, timegroup columns found in input DT and will be overwritten by this function</span></span></code></pre>
<pre><code><span><span class="co">## group column will be overwritten by this function</span></span></code></pre>
<table class="table">
<thead><tr class="header">
<th align="left">ID</th>
<th align="right">timegroup</th>
<th align="right">group</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">H</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">I</td>
<td align="right">1</td>
<td align="right">121</td>
</tr>
<tr class="odd">
<td align="left">J</td>
<td align="right">1</td>
<td align="right">204</td>
</tr>
<tr class="even">
<td align="left">H</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">I</td>
<td align="right">2</td>
<td align="right">122</td>
</tr>
<tr class="even">
<td align="left">J</td>
<td align="right">2</td>
<td align="right">205</td>
</tr>
<tr class="odd">
<td align="left">H</td>
<td align="right">3</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">I</td>
<td align="right">3</td>
<td align="right">123</td>
</tr>
<tr class="odd">
<td align="left">J</td>
<td align="right">3</td>
<td align="right">206</td>
</tr>
</tbody>
</table>
<p>The <code>group_polys</code> function groups individuals whose home ranges intersect. This represents the coarsest grouping method, to provide a measure of overlap across seasons, years or all available relocations. It can either return the proportion of home range area overlapping between individuals or simple groups. Home ranges are calculated using <code><a href="https://rdrr.io/pkg/adehabitatHR/man/kernelUD.html" class="external-link">adehabitatHR::kernelUD</a></code> or <code><a href="https://rdrr.io/pkg/adehabitatHR/man/mcp.html" class="external-link">adehabitatHR::mcp</a></code>. Alternatively, a simple features POLYGON or MULTIPOLYGON object can be provided to the <code>sfPolys</code> argument along with an id column.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">utm</span> <span class="op">&lt;-</span> <span class="fl">32736</span></span>
<span><span class="fu"><a href="../reference/group_times.html">group_times</a></span><span class="op">(</span>DT <span class="op">=</span> <span class="va">DT</span>, datetime <span class="op">=</span> <span class="st">'datetime'</span>, threshold <span class="op">=</span> <span class="st">'8 days'</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/group_polys.html">group_polys</a></span><span class="op">(</span>DT <span class="op">=</span> <span class="va">DT</span>, area <span class="op">=</span> <span class="cn">TRUE</span>, hrType <span class="op">=</span> <span class="st">'mcp'</span>,</span>
<span>           hrParams <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'percent'</span> <span class="op">=</span> <span class="fl">95</span><span class="op">)</span>,</span>
<span>           projection <span class="op">=</span> <span class="va">utm</span>,</span>
<span>           coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'X'</span>, <span class="st">'Y'</span><span class="op">)</span>, id <span class="op">=</span> <span class="st">'ID'</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## timegroup columns found in input DT and will be overwritten by this function</span></span></code></pre>
<pre><code><span><span class="co">## Registered S3 methods overwritten by 'adehabitatMA':</span></span>
<span><span class="co">##   method                       from</span></span>
<span><span class="co">##   print.SpatialPixelsDataFrame sp  </span></span>
<span><span class="co">##   print.SpatialPixels          sp</span></span></code></pre>
<table class="table">
<thead><tr class="header">
<th align="left">ID1</th>
<th align="left">ID2</th>
<th align="right">area</th>
<th align="right">proportion</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">H</td>
<td align="left">H</td>
<td align="right">81071930 [m^2]</td>
<td align="right">100.00000 [percent]</td>
</tr>
<tr class="even">
<td align="left">I</td>
<td align="left">H</td>
<td align="right">57514743 [m^2]</td>
<td align="right">45.73709 [percent]</td>
</tr>
<tr class="odd">
<td align="left">J</td>
<td align="left">H</td>
<td align="right">66161291 [m^2]</td>
<td align="right">49.93401 [percent]</td>
</tr>
<tr class="even">
<td align="left">H</td>
<td align="left">I</td>
<td align="right">57514743 [m^2]</td>
<td align="right">70.94286 [percent]</td>
</tr>
<tr class="odd">
<td align="left">I</td>
<td align="left">I</td>
<td align="right">125750781 [m^2]</td>
<td align="right">100.00000 [percent]</td>
</tr>
<tr class="even">
<td align="left">J</td>
<td align="left">I</td>
<td align="right">93471355 [m^2]</td>
<td align="right">70.54578 [percent]</td>
</tr>
<tr class="odd">
<td align="left">H</td>
<td align="left">J</td>
<td align="right">66161291 [m^2]</td>
<td align="right">81.60814 [percent]</td>
</tr>
<tr class="even">
<td align="left">I</td>
<td align="left">J</td>
<td align="right">93471355 [m^2]</td>
<td align="right">74.33064 [percent]</td>
</tr>
<tr class="odd">
<td align="left">J</td>
<td align="left">J</td>
<td align="right">132497451 [m^2]</td>
<td align="right">100.00000 [percent]</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="edge-list-generation">Edge list generation<a class="anchor" aria-label="anchor" href="#edge-list-generation"></a>
</h2>
<p>The <code>edge_dist</code> function calculates the geographic distance between between individuals within each timegroup and returns all paired relocations within the spatial threshold. <code>edge_dist</code> uses a distance matrix like group_pts, but, in contrast, does not use the chain rule to group relocations.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/group_times.html">group_times</a></span><span class="op">(</span>DT <span class="op">=</span> <span class="va">DT</span>, datetime <span class="op">=</span> <span class="st">'datetime'</span>, threshold <span class="op">=</span> <span class="st">'15 minutes'</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/edge_dist.html">edge_dist</a></span><span class="op">(</span><span class="va">DT</span>, threshold <span class="op">=</span> <span class="fl">50</span>, id <span class="op">=</span> <span class="st">'ID'</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'X'</span>, <span class="st">'Y'</span><span class="op">)</span>, timegroup <span class="op">=</span> <span class="st">'timegroup'</span>, fillNA <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## block, timegroup columns found in input DT and will be overwritten by this function</span></span></code></pre>
<table class="table">
<thead><tr class="header">
<th align="right">timegroup</th>
<th align="left">ID1</th>
<th align="left">ID2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">158</td>
<td align="left">H</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">158</td>
<td align="left">I</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="right">158</td>
<td align="left">J</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">159</td>
<td align="left">H</td>
<td align="left">I</td>
</tr>
<tr class="odd">
<td align="right">159</td>
<td align="left">I</td>
<td align="left">H</td>
</tr>
<tr class="even">
<td align="right">159</td>
<td align="left">J</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="right">160</td>
<td align="left">H</td>
<td align="left">I</td>
</tr>
<tr class="even">
<td align="right">160</td>
<td align="left">I</td>
<td align="left">H</td>
</tr>
<tr class="odd">
<td align="right">160</td>
<td align="left">J</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<p>The <code>edge_nn</code> function calculates the nearest neighbour to each individual within each time group. If the optional distance threshold is provided, it is used to limit the maximum distance between neighbours. <code>edge_nn</code> returns an edge list of each individual and their nearest neighbour.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/group_times.html">group_times</a></span><span class="op">(</span>DT <span class="op">=</span> <span class="va">DT</span>, datetime <span class="op">=</span> <span class="st">'datetime'</span>, threshold <span class="op">=</span> <span class="st">'15 minutes'</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/edge_nn.html">edge_nn</a></span><span class="op">(</span><span class="va">DT</span>, id <span class="op">=</span> <span class="st">'ID'</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'X'</span>, <span class="st">'Y'</span><span class="op">)</span>, timegroup <span class="op">=</span> <span class="st">'timegroup'</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## minutes, timegroup columns found in input DT and will be overwritten by this function</span></span></code></pre>
<table class="table">
<thead><tr class="header">
<th align="right">timegroup</th>
<th align="left">ID</th>
<th align="left">NN</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">H</td>
<td align="left">J</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">I</td>
<td align="left">J</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">J</td>
<td align="left">I</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">H</td>
<td align="left">J</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">I</td>
<td align="left">J</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">J</td>
<td align="left">I</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="notes">Notes<a class="anchor" aria-label="anchor" href="#notes"></a>
</h2>
<p>Package dependencies for <code>spatsoc</code> are <code>sp</code>, <code>rgeos</code>, <code>igraph</code>, <code>adehabitatHR</code> and <code>data.table</code>. <code>data.table</code> provides efficient methods for manipulating large (or small) datasets. As a result, input <code>DT</code> for all <code>spatsoc</code> functions must be a <code>data.table</code> and if it isn’t, you can simply use <code>data.table::setDT(df)</code> to convert it by reference.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
